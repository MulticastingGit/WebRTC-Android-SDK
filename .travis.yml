language: android
dist: jammy
android:
  components:
    # Uncomment the lines below if you want to
    # use the latest revision of Android SDK Tools
    # - tools
    # - platform-tools

    # The BuildTools version used by your project
    - build-tools-33.0.0

    # The SDK version used to compile your project
    - android-33

before_install:
  - sdkmanager --install 'system-images;android-33;google_apis_playstore;x86_64'

before_script:
  - echo no | avdmanager create avd --force -n test --abi 'google_apis_playstore/x86_64' --package 'system-images;android-33;google_apis_playstore;x86_64'
  - emulator -avd test -no-window -gpu swiftshader_indirect -no-snapshot -noaudio -no-boot-anim
  - android-wait-for-emulator
  - adb shell input keyevent 82 &

script:
  - ./gradlew jacocoTestReport --stacktrace